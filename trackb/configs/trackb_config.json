{
  "version": "2.0.0",
  "mode": "from_artifacts",
  "random_seed": 42,

  "paths": {
    "data_root": "../../data/",
    "step1_artifacts": "../../data/step1/",
    "step2_artifacts": "../../data/step2/",
    "step3_artifacts": "../../data/step3/",
    "trackb_root": "./",
    "trackb_outputs": "./outputs/",
    "trackb_reports": "./outputs/reports/",
    "trackb_figures": "./outputs/figures/"
  },

  "data": {
    "test_size": 200,
    "training_pool_size": 1050,
    "total_wafers": 1252,
    "high_risk_quantile": 0.20,
    "high_risk_method": "bottom_quantile_fixed_k",
    "high_risk_tie_breaker": "wafer_id"
  },

  "cost_policy": {
    "absolute_dollar_forbidden": true,
    "inline_cost_unit": 1,
    "sem_cost_unit_grid": [1, 2, 3, 5, 7, 10]
  },
  "baselines": {
    "random": {
      "rate": 0.10,
      "seed": 42,
      "n_runs": 1
    },
    "rulebased": {
      "rate": 0.10,
      "risk_column": "riskscore",
      "selection_method": "top_k_percent"
    }
  },

  "agent": {
    "enable_optimizer": true,
    "enable_scheduler": true,
    "enable_explainer": true,
    "budget_total": 3000,
    "budget_per_wafer_inline": 150,
    "budget_per_wafer_sem": 500,
    "threshold_search_space": [0.85, 0.88, 0.90, 0.92, 0.95],
    "use_percentile_threshold": true,
    "target_selection_rate": 0.10,
    "target_metric": "recall",
    "split_strategy": "stratified_80_20",
    "fit_training_fraction": 0.80
  },

  "llm": {
    "enabled": false,
    "provider": "anthropic",
    "model": "claude-3-sonnet-20240229"
  },
  "validation": {
    "alpha": 0.05,
    "proxy_validation_policy": "warn_only",
    "significance_policy": "primary_endpoints_only",
    "primary_endpoints": ["high_risk_recall", "cost_per_catch"],
    "enforce_manifest": true,
    "enforce_no_leakage": true,
    "report_lint_forbidden_phrases": true,
    "report_number_spotcheck_count": 5,
    "bootstrap": {
      "n_boot": 10000,
      "alpha": 0.05,
      "seed": 42
    },
    "forbidden_phrases": [
      "validated end-to-end",
      "causally linked",
      "ground truth confirmed for step2",
      "ground truth confirmed for step3"
    ]
  },

  "file_patterns": {
    "step1": {
      "test_files": "../data/step1/_stage*_test*.csv",
      "pred_files": "../data/step1/_stage*_pred*.csv",
      "train_files": "../data/step1/_stage*_train*.csv",
      "risk_scores": "../data/step1/_stage*_risk_scores*.csv",
      "combined_risk": "../data/step1/_combined_risk_scores.csv",
      "models": "../data/step1/stage*_xgb.json",
      "encoders": "../data/step1/stage*_label_encoders.pkl*",
      "feature_cols": "../data/step1/stage*_feature_cols.pkl*",
      "data": "../data/step1/stage*_data*.csv"
    },
    "step2": {
      "model": "../data/step2/wm_cnn_best.pt",
      "dataset": "../data/step2/LSWMD.pkl",
      "test_summary": "../data/step2/test_accuracy_summary.json",
      "test_report": "../data/step2/test_classification_report.csv",
      "test_cm": "../data/step2/test_confusion_matrix.csv",
      "severity": "../data/step2/severity_scores_all.csv",
      "stage2b_results": "../data/step2/stage2b_results.csv",
      "sem_send": "../data/step2/sem_send_top10pct.csv"
    },
    "step3": {
      "results": "../data/step3/stage3_results.csv",
      "results_final": "../data/step3/stage3_results_final.csv",
      "efficiency": "../data/step3/efficiency_summary.json",
      "decisions": "../data/step3/engineer_decisions.csv"
    }
  },

  "output_requirements": {
    "required_files": [
      "baselines/random_results.csv",
      "baselines/rulebased_results.csv",
      "baselines/comparison_table.csv",
      "validation/framework_results.csv",
      "validation/stage_breakdown.csv",
      "validation/statistical_tests.json",
      "validation/proxy_validation.json",
      "validation/verification_verdict.json",
      "agent/autotune_summary.json",
      "agent/autotune_history.csv",
      "agent/scheduler_log.csv",
      "agent/decision_trace.csv",
      "reports/trackB_report.md",
      "reports/executive_summary.md",
      "reports/SPEC_COMPLIANCE.md",
      "reports/PIPELINE_IO_TRACE.md",
      "reports/verification_audit.md",
      "reports/verification_evidence_index.md",
      "_manifest.json",
      "trackb_run.log"
    ],
    "optional_files": [
      "figures/"
    ]
  }
}
